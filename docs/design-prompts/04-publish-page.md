# 发布页 - 内容需求

> 页面路径: `pages/publish/index`  
> 页面类型: TabBar页面（发布）  
> 主题规范: 参考 [design-theme.md](./design-theme.md)  
> 更新日期: 2025-11-17

---

## 📋 页面定位

内容发布和编辑页面，用户在这里创作和分享内容。需要提供简洁高效的创作环境，清晰的操作指引，友好的输入反馈，让用户轻松完成内容发布。

**目标用户**: 想要分享内容、发起求助、组织活动的社区用户  
**使用场景**: 分享生活动态、发布求助信息、组织活动、分享经验知识

---

## 🎯 页面内容

### 必需元素

#### 1. 页面标题

- "发布"或"发布内容"

#### 2. 内容类型选择（可选功能）

- **图文**（默认，当前支持）
- **视频**（未来扩展，可暂时显示为灰色不可用）

#### 3. 标题输入

- 输入框标签："标题"或"标题（必填）"
- 占位符："请输入标题..."
- 字数限制提示（如"0/50"）
- 必填项

#### 4. 正文输入

- 输入框标签："正文"或"正文（必填）"
- 占位符："分享你的想法..."
- 支持多行输入
- 字数统计（可选）
- 必填项

#### 5. 图片上传

- 图片网格展示（已上传的图片）
- 添加图片按钮（"+"图标）
- 最多9张图片
- 支持删除已上传的图片
- 可选功能

#### 6. 分类选择

- 标签："分类"
- 选择器："请选择分类 >"
- 点击展开分类列表
- 单选
- 显示已选择的分类

#### 7. 标签选择

- 标签："标签"
- 已选标签展示（可删除）
- 添加标签按钮（"+"图标）
- 最多5个标签
- 可选择现有标签或创建新标签
- 可选功能

#### 8. 底部操作按钮

- **发布**按钮（主要操作）
- **保存草稿**按钮（次要操作，可选）

---

## 🎭 交互需求

### 输入交互

- **标题输入**: 聚焦时展开，实时字数统计，超出限制时提示
- **正文输入**: 多行文本框，自动扩展高度
- **字数限制**: 超出时红色提示

### 图片上传

- **点击添加**: 打开图片选择器（相册/相机）
- **上传进度**: 显示上传进度条或百分比
- **删除图片**: 长按或点击删除图标
- **预览图片**: 点击查看大图
- **最多9张**: 达到上限时隐藏添加按钮

### 分类选择

- **点击选择器**: 打开分类列表弹窗
- **选择分类**: 单选，选中后关闭弹窗
- **显示已选**: 选择器显示已选分类名称

### 标签选择

- **点击标签**: 显示标签选择弹窗
- **选择现有标签**: 多选，最多5个
- **创建新标签**: 输入新标签名称
- **删除标签**: 点击标签上的删除按钮
- **最多5个**: 达到上限时禁用添加

### 发布操作

- **发布按钮**:
  - 检查必填项（标题、正文）
  - 未填写完整时禁用或提示
  - 点击后显示加载状态
  - 成功后跳转到详情页或首页
  - 失败时显示错误提示
- **保存草稿**:
  - 保存当前内容
  - 提示保存成功
  - 可稍后继续编辑

### 状态处理

- **加载中**: 图片上传中、内容发布中
- **验证失败**: 标题或正文为空时的提示
- **上传失败**: 图片上传失败的提示和重试
- **发布成功**: 成功提示和页面跳转
- **发布失败**: 错误提示和重试选项
- **草稿保存**: 保存成功提示

---

## 💡 设计建议（非强制）

### 创作环境

- 简洁高效，减少视觉干扰
- 输入区域充足，易于操作
- 背景色柔和，适合长时间创作
- 字体大小适中，易于阅读和编辑

### 信息层次

建议突出：

1. **输入区域**（标题、正文，用户的主要操作）
2. **发布按钮**（完成创作的主要CTA）
3. **图片上传**（视觉内容）
4. **分类标签**（辅助信息）

### 操作指引

- 必填项有明确标识
- 字数限制清晰可见
- 上传进度实时反馈
- 错误提示友好清晰

### 情感传达

- 友好：鼓励性的占位符文案
- 轻松：简洁的界面，不压迫
- 创作感：给用户足够的创作空间

---

## 📱 技术要求

### 设备适配

- TabBar页面，底部有固定导航栏
- 顶部考虑安全区域
- 键盘弹出时页面自动调整

### 图片处理

- 支持从相册选择
- 支持拍照上传
- 图片压缩和裁剪
- 上传进度显示

### 输入体验

- 正文输入框自动扩展
- 支持粘贴图片（可选）
- 防止误触返回导致内容丢失（提示保存）

### 响应式

- 适配不同设备屏幕
- 图片网格自适应
- 操作按钮点击区域足够大

## 🎨 设计资源需求

### 图标

- 关闭/返回图标
- 图片上传"+"图标
- 图片删除图标
- 箭头图标（用于选择器）
- 添加标签"+"图标

### 插图（可选）

- 上传进度动画
- 发布成功动画

### 弹窗

- 分类选择弹窗
- 标签选择弹窗
- 图片预览弹窗
- 退出确认弹窗

---

## 🎯 AI设计提示词

```
请为"社区助手"小程序设计发布页。

【项目信息】
- 产品名称: 社区助手
- 页面定位: 内容创作和发布的核心页面
- 设计主题: 参考 design-theme.md
- 目标设备: 2025年主流移动设备

【页面内容】

必需元素：
1. 页面标题
   - "发布"或"发布内容"
   - 关闭/返回按钮（可选）

2. 内容类型选择（可选功能）
   - 图文（默认，当前支持）
   - 视频（未来扩展，可显示为灰色不可用）

3. 标题输入
   - 标签："标题（必填）"
   - 占位符："请输入标题..."
   - 字数限制提示（如"0/50"）

4. 正文输入
   - 标签："正文（必填）"
   - 占位符："分享你的想法..."
   - 多行文本框
   - 字数统计（可选）

5. 图片上传
   - 已上传图片网格展示
   - 添加图片按钮（"+"）
   - 最多9张
   - 支持删除

6. 分类选择
   - 标签："分类"
   - 选择器："请选择分类 >"
   - 单选

7. 标签选择
   - 标签："标签"
   - 已选标签展示（可删除）
   - 添加标签按钮
   - 最多5个
   - 可选择现有或创建新标签

8. 底部操作按钮
   - 发布按钮（主要CTA）
   - 保存草稿按钮（次要操作，可选）

【交互需求】

输入交互：
- 标题：聚焦、实时字数统计、超出限制提示
- 正文：多行输入、自动扩展高度

图片上传：
- 点击添加打开选择器（相册/相机）
- 上传进度显示
- 删除已上传图片
- 预览图片
- 达到9张上限时隐藏添加按钮

分类选择：
- 点击打开分类列表弹窗
- 单选，选中后关闭弹窗
- 显示已选分类

标签选择：
- 点击打开标签选择弹窗
- 多选，最多5个
- 支持创建新标签
- 删除已选标签
- 达到上限时禁用添加

发布操作：
- 检查必填项（标题、正文）
- 未完成时禁用或提示
- 发布中显示加载状态
- 成功后跳转到详情页或首页
- 失败时显示错误提示

保存草稿：
- 保存当前内容
- 提示保存成功

状态设计：
- 类型选择：默认态、选中态
- 输入框：默认、聚焦、填写、超出限制（红色提示）
- 图片：上传中、上传成功、上传失败、删除确认
- 选择器：未选、已选
- 发布按钮：可发布、不可发布、发布中
- 草稿保存：默认、保存中、保存成功

【弹窗设计】
- 分类选择弹窗（底部弹出，列表选择）
- 标签选择弹窗（底部弹出，多选，可创建新标签）
- 图片预览（全屏查看）
- 退出确认（"保存草稿"/"放弃"/"取消"）

【设计方向】

情感调性：友好、鼓励、轻松、创作感

建议（非强制）：
- 简洁高效，减少视觉干扰
- 输入区域充足，易于操作
- 必填项有明确标识
- 字数限制清晰可见
- 上传进度实时反馈
- 错误提示友好清晰
- 发布按钮作为主要CTA，视觉突出
- 布局自由发挥

【特殊场景】
- 必填项验证（标题、正文）
- 字数限制（标题50字）
- 图片限制（最多9张）
- 标签限制（最多5个）
- 误触返回的内容保护（提示保存）

【技术要求】
- TabBar页面，底部有固定导航栏
- 顶部考虑安全区域
- 键盘弹出时页面自动调整
- 图片上传（相册/拍照）
- 图片压缩和裁剪
- 正文输入框自动扩展

【设计主题参考】
详见 design-theme.md 中的：
- 品牌色：#1890FF
- 错误色：可用红色系
- 颜色系统、文本样式、组件规范等
- 可灵活调整，保持整体一致即可

请自由发挥创意，设计一个简洁高效的内容发布页。
```

---

## ✅ 验收要点

### 内容完整性

- [ ] 包含所有必需元素（标题、正文、图片、分类、标签、操作按钮）
- [ ] 所有交互状态完整
- [ ] 4种弹窗设计完整
- [ ] 有错误和验证提示

### 创作体验

- [ ] 界面简洁，无干扰
- [ ] 输入区域充足易操作
- [ ] 必填项标识清晰
- [ ] 字数限制易见
- [ ] 上传进度实时反馈

### 信息层次

- [ ] 输入区域最突出
- [ ] 发布按钮视觉清晰（主要CTA）
- [ ] 图片上传区域易找
- [ ] 分类标签辅助信息
- [ ] 整体不拥挤

### 操作指引

- [ ] 操作流程清晰
- [ ] 必填项有提示
- [ ] 验证失败有友好提示
- [ ] 退出有保护机制
- [ ] 成功发布有反馈

### 情感传达

- [ ] 友好鼓励的氛围
- [ ] 轻松的创作感
- [ ] 不压迫的界面
- [ ] 符合社区助手定位

### 技术可行性

- [ ] 适配不同设备尺寸
- [ ] 键盘弹出处理正确
- [ ] TabBar不遮挡内容
- [ ] 图片上传可实现
- [ ] 输入框自适应高度

---

**版本**: 1.0.0  
**设计师**: 待指定  
**审核人**: 待指定  
**更新日期**: 2025-11-17
