# ğŸ” å“åº”æ ¼å¼è§„èŒƒåŒ–åˆ†æ

## ğŸ¯ ä¸¤ç§æ–¹æ¡ˆå¯¹æ¯”

### æ–¹æ¡ˆ Aï¼šçµæ´»åŒ…è£…ï¼ˆå½“å‰æ–¹æ¡ˆï¼‰â­ æ¨è

```typescript
// ç®€å•æ•°æ®
{
  "code": 200,
  "data": [...]  // ç›´æ¥æ•°ç»„
}

// åˆ†é¡µæ•°æ®
{
  "code": 200,
  "data": {
    "items": [...],
    "total": 100
  }
}
```

**ä¼˜ç‚¹**ï¼š

- âœ… ç®€æ´ï¼Œå‰ç«¯è§£æç®€å•
- âœ… å¸¸è§æ•°æ®ä¸éœ€è¦å¤šä¸€å±‚è§£åŒ…
- âœ… æ€§èƒ½å¥½ï¼ˆæ•°æ®ç»“æ„æ›´æ‰å¹³ï¼‰
- âœ… å¤§å¤šæ•°å¼€æºé¡¹ç›®é‡‡ç”¨

**ç¼ºç‚¹**ï¼š

- âš ï¸ ç»“æ„ä¸å®Œå…¨ç»Ÿä¸€
- âš ï¸ å‰ç«¯éœ€è¦åˆ¤æ–­ç±»å‹

---

### æ–¹æ¡ˆ Bï¼šç»Ÿä¸€åŒ…è£…

```typescript
// æ‰€æœ‰æ•°æ®éƒ½åŒ…è£…
{
  "code": 200,
  "data": {
    "result": [...]  // ç®€å•æ•°æ®ä¹ŸåŒ…ä¸€å±‚
  }
}

{
  "code": 200,
  "data": {
    "result": {
      "items": [...],
      "total": 100
    }
  }
}
```

**ä¼˜ç‚¹**ï¼š

- âœ… ç»“æ„å®Œå…¨ç»Ÿä¸€
- âœ… æ˜“äºæ‰©å±•ï¼ˆå¯ä»¥åŠ  meta ç­‰ï¼‰

**ç¼ºç‚¹**ï¼š

- âŒ å¤šä¸€å±‚åµŒå¥—ï¼Œå‰ç«¯è§£æå¤æ‚
- âŒ æ•°æ®å†—ä½™
- âŒ ä¸ç¬¦åˆç¤¾åŒºä¸»æµ

---

## ğŸŒ ç¤¾åŒºæˆç†Ÿæ–¹æ¡ˆå‚è€ƒ

### 1. Google API Design Guide â­â­â­â­â­

**å®˜æ–¹æ–‡æ¡£**: https://cloud.google.com/apis/design

```json
// ç®€å•åˆ—è¡¨
{
  "items": [...]
}

// åˆ†é¡µåˆ—è¡¨
{
  "items": [...],
  "nextPageToken": "...",
  "totalSize": 100
}

// é”™è¯¯
{
  "error": {
    "code": 404,
    "message": "Not found"
  }
}
```

**ç‰¹ç‚¹**ï¼š

- ç®€æ´å®ç”¨
- æ”¯æŒ nextPageTokenï¼ˆæ¸¸æ ‡åˆ†é¡µï¼‰
- Google å†…éƒ¨å¤§è§„æ¨¡ä½¿ç”¨

---

### 2. GitHub API â­â­â­â­â­

```json
// ç®€å•æ•°æ®
{
  "id": 1,
  "name": "repo"
}

// åˆ—è¡¨æ•°æ®
[
  { "id": 1 },
  { "id": 2 }
]

// åˆ†é¡µé€šè¿‡ Link Header
// Link: <https://api.github.com/repos?page=2>; rel="next"
```

**ç‰¹ç‚¹**ï¼š

- æç®€è®¾è®¡
- åˆ†é¡µä¿¡æ¯åœ¨ HTTP Header
- RESTful çº¯ç²¹

---

### 3. Stripe API â­â­â­â­

```json
// åˆ—è¡¨ï¼ˆæ¸¸æ ‡åˆ†é¡µï¼‰
{
  "object": "list",
  "data": [...],
  "has_more": true,
  "url": "/v1/charges"
}

// è¯¦æƒ…
{
  "object": "charge",
  "id": "ch_xxx",
  "amount": 1000
}
```

**ç‰¹ç‚¹**ï¼š

- æ¸¸æ ‡åˆ†é¡µï¼ˆhas_more + starting_afterï¼‰
- æ‰€æœ‰å“åº”éƒ½æœ‰ object å­—æ®µæ ‡è¯†ç±»å‹

---

### 4. Microsoft Graph API â­â­â­â­

```json
// åˆ—è¡¨
{
  "value": [...],
  "@odata.nextLink": "..."
}

// è¯¦æƒ…
{
  "id": "1",
  "displayName": "User"
}
```

**ç‰¹ç‚¹**ï¼š

- OData æ ‡å‡†
- @odata å‰ç¼€çš„å…ƒæ•°æ®

---

### 5. AWS API â­â­â­

```json
// åˆ—è¡¨
{
  "Items": [...],
  "NextToken": "..."
}

// è¯¦æƒ…
{
  "Item": {
    "id": "1"
  }
}
```

**ç‰¹ç‚¹**ï¼š

- é¦–å­—æ¯å¤§å†™
- æ¸¸æ ‡åˆ†é¡µ

---

### 6. Spring Boot + PageHelper â­â­â­â­â­ï¼ˆå›½å†…æœ€æµè¡Œï¼‰

```json
// åˆ†é¡µåˆ—è¡¨
{
  "code": 200,
  "data": {
    "list": [...],
    "pageNum": 1,
    "pageSize": 10,
    "total": 100,
    "pages": 10
  }
}

// ç®€å•æ•°æ®
{
  "code": 200,
  "data": {...}
}
```

**ç‰¹ç‚¹**ï¼š

- å›½å†…æœ€å¸¸ç”¨
- é˜¿é‡Œè§„èŒƒæ¨è
- ä¸ä½ çš„å½“å‰æ–¹æ¡ˆç±»ä¼¼

---

### 7. Ant Design Pro â­â­â­â­ï¼ˆå‰ç«¯æ¨èï¼‰

```json
// åˆ—è¡¨
{
  "success": true,
  "data": {
    "list": [...],
    "total": 100,
    "current": 1,
    "pageSize": 10
  }
}

// è¯¦æƒ…
{
  "success": true,
  "data": {...}
}

// é”™è¯¯
{
  "success": false,
  "errorMessage": "..."
}
```

**ç‰¹ç‚¹**ï¼š

- success å­—æ®µåˆ¤æ–­æˆåŠŸ/å¤±è´¥
- å›½å†…å‰ç«¯ç”Ÿæ€æµè¡Œ

---

## ğŸ“Š ç»¼åˆæ¨èæ–¹æ¡ˆ

### æ¨èæ–¹æ¡ˆ 1ï¼šçµæ´» + è§„èŒƒï¼ˆâ­â­â­â­â­ æœ€æ¨èï¼‰

**å°±æ˜¯ä½ å½“å‰çš„æ–¹æ¡ˆï¼**

```typescript
// 1. ç®€å•æ•°æ®/è¯¦æƒ… - ç›´æ¥æ”¾ data
{
  "code": 200,
  "message": "success",
  "data": {...} æˆ– [...]
}

// 2. åˆ†é¡µåˆ—è¡¨ - data åŒ…ä¸€å±‚
{
  "code": 200,
  "message": "success",
  "data": {
    "items": [...],
    "total": 100,
    "page": 1,
    "pageSize": 10
  }
}

// 3. æ¸¸æ ‡åˆ†é¡µï¼ˆå¦‚éœ€è¦ï¼‰
{
  "code": 200,
  "message": "success",
  "data": {
    "items": [...],
    "nextToken": "xxx",
    "hasMore": true
  }
}
```

**ä¼˜åŠ¿**ï¼š

- âœ… å‚è€ƒ Google + Spring Boot
- âœ… çµæ´»ä½†æœ‰è§„èŒƒ
- âœ… å›½å†…å¤–éƒ½è®¤å¯
- âœ… å‰ç«¯æ˜“ç”¨

---

### æ¨èæ–¹æ¡ˆ 2ï¼šå®Œå…¨ç»Ÿä¸€ï¼ˆå¦‚æœä½ æƒ³æ›´è§„èŒƒï¼‰

```typescript
// ç»Ÿä¸€ç»“æ„
interface ApiResponse<T> {
  code: number;
  message: string;
  data: ApiData<T>;
  timestamp: number;
}

interface ApiData<T> {
  result: T;           // å®é™…æ•°æ®
  meta?: {             // å…ƒä¿¡æ¯ï¼ˆå¯é€‰ï¼‰
    total?: number;
    page?: number;
    nextToken?: string;
  };
}

// ç¤ºä¾‹
{
  "code": 200,
  "data": {
    "result": [...],   // ç»Ÿä¸€ç”¨ result
    "meta": {
      "total": 100
    }
  }
}
```

**ä¼˜åŠ¿**ï¼š

- âœ… å®Œå…¨ç»Ÿä¸€
- âœ… æ˜“äºæ‰©å±•
- âœ… ç±»å‹å®‰å…¨

**åŠ£åŠ¿**ï¼š

- âŒ å¤šä¸€å±‚åµŒå¥—
- âŒ å‰ç«¯éœ€è¦å¤šè§£åŒ…ä¸€å±‚

---

## ğŸ¯ æˆ‘çš„å»ºè®®

### å»ºè®®ï¼šä¿æŒå½“å‰æ–¹æ¡ˆï¼ˆæ–¹æ¡ˆ Aï¼‰

**åŸå› **ï¼š

1. **ç¬¦åˆä¸»æµ**
   - Googleã€GitHubã€Stripe éƒ½é‡‡ç”¨ç±»ä¼¼æ–¹å¼
   - Spring Boot æ ‡å‡†åšæ³•
   - å›½å†…å¤§å‚ï¼ˆé˜¿é‡Œã€è…¾è®¯ï¼‰é€šç”¨

2. **å®ç”¨æ€§å¼º**
   - ç®€å•åœºæ™¯ç®€æ´
   - å¤æ‚åœºæ™¯çµæ´»
   - å‰ç«¯æ˜“ç”¨

3. **ä½ å·²ç»å®ç°äº†**
   - ä»£ç å·²å†™å¥½
   - è¿è¡Œç¨³å®š
   - ç¬¦åˆè§„èŒƒ

---

## ğŸ“ è§„èŒƒåŒ–å»ºè®®

å¦‚æœæƒ³æ›´è§„èŒƒï¼Œå»ºè®®ï¼š

### 1. æ–‡æ¡£åŒ–å½“å‰è§„åˆ™

åˆ›å»º `API_RESPONSE_SPEC.md`ï¼š

```markdown
# API å“åº”è§„èŒƒ

## åŸºç¡€ç»“æ„

æ‰€æœ‰å“åº”éƒ½åŒ…å«ï¼šcode, message, data, timestamp

## æ•°æ®åŒ…è£…è§„åˆ™

1. ç®€å•æ•°æ®/è¯¦æƒ… - data ç›´æ¥æ˜¯æ•°æ®
2. åˆ†é¡µåˆ—è¡¨ - data åŒ…å« { items, total, page, pageSize }
3. æ“ä½œç»“æœ - data æ˜¯æ“ä½œåçš„æ•°æ®æˆ– null
```

### 2. TypeScript ç±»å‹å®šä¹‰

```typescript
// åŸºç¡€å“åº”
interface ApiResponse<T = any> {
  code: number;
  message: string;
  data: T;
  timestamp: number;
}

// åˆ†é¡µå“åº”
interface PageResponse<T> {
  items: T[];
  total: number;
  page: number;
  pageSize: number;
}

// æ¸¸æ ‡åˆ†é¡µå“åº”
interface CursorResponse<T> {
  items: T[];
  nextToken?: string;
  hasMore: boolean;
}
```

### 3. å‰ç«¯ç»Ÿä¸€å¤„ç†

```typescript
// API Client é€‚é…å™¨
function unwrapResponse<T>(response: ApiResponse<T>): T {
  if (response.code !== 200) {
    throw new Error(response.message);
  }
  return response.data;
}

// ä½¿ç”¨
const data = unwrapResponse(await api.get('/categories'));
```

---

## ğŸ”„ å¦‚æœè¦æ”¹æˆå®Œå…¨ç»Ÿä¸€

### å·¥ä½œé‡è¯„ä¼°ï¼š2-3 å¤©

**éœ€è¦æ”¹åŠ¨**ï¼š

1. **åç«¯** (1 å¤©)
   - ä¿®æ”¹å“åº”æ‹¦æˆªå™¨
   - æ›´æ–°æ‰€æœ‰ Service è¿”å›ç»“æ„
   - æ›´æ–°ç±»å‹å®šä¹‰

2. **å‰ç«¯** (1-2 å¤©)
   - æ›´æ–° API Client è§£åŒ…é€»è¾‘
   - ä¿®æ”¹æ‰€æœ‰æ¥å£è°ƒç”¨
   - æ›´æ–°ç±»å‹å®šä¹‰

3. **æµ‹è¯•** (0.5 å¤©)
   - å›å½’æµ‹è¯•æ‰€æœ‰æ¥å£

**é£é™©**ï¼š

- âš ï¸ æ”¹åŠ¨èŒƒå›´å¤§
- âš ï¸ å®¹æ˜“å‡º bug
- âš ï¸ æ”¶ç›Šä¸æ˜æ˜¾

---

## ğŸ‰ ç»“è®º

**ä¿æŒå½“å‰æ–¹æ¡ˆï¼**

ä½ çš„è®¾è®¡å·²ç»å¾ˆå¥½äº†ï¼š

- âœ… ç¬¦åˆç¤¾åŒºä¸»æµï¼ˆGoogleã€Spring Bootï¼‰
- âœ… ç®€æ´å®ç”¨
- âœ… çµæ´»å¤Ÿç”¨
- âœ… ç±»å‹å®‰å…¨

**ä¸å»ºè®®æ”¹æˆå®Œå…¨ç»Ÿä¸€**ï¼š

- âŒ æ”¹åŠ¨å¤§
- âŒ æ”¶ç›Šå°
- âŒ ä¸ç¬¦åˆä¸»æµ

---

## ğŸ“š å‚è€ƒèµ„æº

1. **Google API Design Guide**
   https://cloud.google.com/apis/design

2. **Microsoft REST API Guidelines**
   https://github.com/microsoft/api-guidelines

3. **é˜¿é‡Œå·´å·´ Java å¼€å‘æ‰‹å†Œ**
   è¿”å›ç»“æœè§„èŒƒ

4. **Ant Design Pro**
   å‰ç«¯æ¥å£è§„èŒƒ

5. **Spring Boot Best Practices**
   ç»Ÿä¸€å“åº”ä½“è®¾è®¡

---

**ä½ çš„å½“å‰æ–¹æ¡ˆå·²ç»æ˜¯æœ€ä½³å®è·µï¼** ğŸŠ
